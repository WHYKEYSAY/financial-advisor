# ==============================================
# Railway 生产环境配置模板
# ==============================================
# 
# 使用说明:
# 1. 运行 python generate_production_secrets.py 生成密钥
# 2. 将以下变量复制到 Railway Dashboard → Variables
# 3. 替换所有 [需要填写] 的值
#
# ==============================================

# -----------------------------
# 应用基础配置
# -----------------------------
APP_ENV=production
LOG_LEVEL=INFO
TZ=UTC

# -----------------------------
# 安全密钥 (使用生成器生成)
# -----------------------------
SECRET_KEY=[运行 generate_production_secrets.py 生成]
ENCRYPTION_KEY=[运行 generate_production_secrets.py 生成]
JWT_ALG=HS256
JWT_ACCESS_TTL_MIN=15
JWT_REFRESH_TTL_DAYS=14

# -----------------------------
# 数据库连接 (Railway 自动引用)
# -----------------------------
DATABASE_URL=${{Postgres.DATABASE_URL}}
REDIS_URL=${{Redis.REDIS_URL}}

# -----------------------------
# API 密钥
# -----------------------------
OPENAI_API_KEY=[你的 OpenAI API Key]
OPENAI_MODEL=gpt-4o-mini

# -----------------------------
# CORS 配置
# -----------------------------
# 方式 1: 指定前端域名（推荐）
BACKEND_CORS_ORIGINS=https://your-frontend.vercel.app

# 方式 2: 允许多个域名（用逗号分隔）
# BACKEND_CORS_ORIGINS=https://frontend1.com,https://frontend2.com

# 方式 3: 临时允许所有（仅测试用，生产环境禁用！）
# BACKEND_CORS_ORIGINS=*

# -----------------------------
# 文件存储
# -----------------------------
FILE_STORAGE_DIR=/app/data/uploads
MAX_FILE_SIZE_MB=25

# -----------------------------
# 速率限制 (每分钟请求数)
# -----------------------------
RATE_LIMIT_FREE=60/minute
RATE_LIMIT_OPTIMIZER=240/minute
RATE_LIMIT_AUTOPILOT=600/minute

# -----------------------------
# AI 使用配额 (每月)
# -----------------------------
AI_QUOTA_FREE=100
AI_QUOTA_OPTIMIZER=1000
AI_QUOTA_AUTOPILOT=3000

# -----------------------------
# Stripe 支付 (可选)
# -----------------------------
# 暂时留空，Phase 2 再配置
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Stripe 价格 ID
STRIPE_PRICE_ANALYST=price_free
STRIPE_PRICE_OPTIMIZER_MONTHLY=
STRIPE_PRICE_OPTIMIZER_YEARLY=
STRIPE_PRICE_AUTOPILOT_MONTHLY=
STRIPE_PRICE_AUTOPILOT_YEARLY=

# -----------------------------
# Plaid 银行集成 (可选)
# -----------------------------
# Phase 2 功能，暂时留空
PLAID_CLIENT_ID=
PLAID_SECRET=
PLAID_ENV=sandbox

# -----------------------------
# 监控与错误追踪 (可选)
# -----------------------------
# Phase 2 功能，可暂时留空
SENTRY_DSN=

# ==============================================
# 部署检查清单
# ==============================================
# 
# [ ] 所有 [需要填写] 的值已替换
# [ ] SECRET_KEY 和 ENCRYPTION_KEY 已生成
# [ ] OPENAI_API_KEY 已设置
# [ ] BACKEND_CORS_ORIGINS 已配置前端域名
# [ ] DATABASE_URL 和 REDIS_URL 使用 Railway 引用
# [ ] 密钥已保存到密码管理器
#
# ==============================================
